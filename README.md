# Evologin
This is a micro service for logging in and generating a JWT. 
Other services will use that JWT for authentication, authorization and maybe some basic config.

The authentication endpoint /login accepts a base-64-encoded username:password in a classic basic authorization header.

## Redis
To run this service you need to have a running redis server somewhere.
You can configure point evologin to redis server by specifying env variables:
* REDIS_HOST
* REDIS_PORT
If not provided evologin defaults to localhost:6379

To start run in terminal as root: `redis-server`
To troubleshoot data-related stuff use terminal as any user and `redis-cli`
    `keys *`                         - select all keys (users)
    `set test "{password: 'kuku'}"`  - insert a record (user)
    `get test`                      - select one record       

Values of the keys should be a stringified JSON.
Maybe in future I'll add support for login and password.

## JWT
The token generated by this service will be used in other services.
Endpoint /login returns a token in a body response
That token should be later used in a header Authorization: Bearer <token>

This service uses a JWT key passed as an env variable:
* JWT_KEY
Other service will either use the same piece of code to verify the token or use a verification endpoint /verify.

## Logging
Evologin uses the winston for logging.
There are following options configurable with env variables:
* LOG_LEVEL         - Yes you can configure logging precision. Use it! Default info
* LOG_FILE          - File to log messages to
If no LOG_FILE is provided the service will log to console.
In future I should add an UDP broadcast of logs for better performance.

## Installation
Clone and traditionally:
    ```npm install```

## Testing
Start redis and run:
    ```npm test```

# Running locally
Start Redis and run:
    ```npm run locally```

To change the port on which the service is running use env variable:
* EVOLOGIN_PORT
